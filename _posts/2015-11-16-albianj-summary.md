---
layout: post
categories: [Albianj,java]
title: "腾讯文学内容中心分布式统一框架的设计与实现--总结"
tags: [ALbianj,java]
---

###成效
内容中心是第一个真正全面的使用albianj的项目。因为我们的一些业务的特殊性（比如我
们对于资源的面对经常是无抢权更新的），albianj在一些完整性或者是一致性
上都做了相关的一些让步。做出让步并不是指albianj不能做到，而仅仅是为了
系统的简单，我们对于albianj进行了裁剪。但是一些基本的功能和一些基本的
要求，albianj还是一丝不苟去实现的。

使用了albianj后，我们统一了开发者的代码规范，我们也统一了我们维护系统
的一致性。但是在实际的研发过程中，其实并没有给开发者带来更多的在开发时
间上的紧迫感，相反，还可以为开发者赢得相对宝贵的时间。因为albianj在
persisten上做了大量的工作，使得开发者可以完全的不同考虑后端数据库的部
署和数据的拆分对于系统的影响。如果使用标准的三层架构，那么DataAccess层
其实albianj已经帮开发者解决掉了。而对于开发者来说，增加分布式锁，编写
业务性质的数据路由服务，配置albianj的基础配置文件这3项是不管使用什么技
术或者组件，由于系统结构的变迁，这是省不掉的。

因为albianj对于persisten层的精益求精，导致了开发者在开发分布式数据库的
程序的时候几乎是0成本的。而且对于后期的扩展性也有极高的支持。对于分不
分表经常出现的需要重新平衡数据的情况，虽然albianj并不能解决掉这个问题
（因为这个问题主要和业务相关，和albianj并无任何的关系），但是albianj可
以在通过更新几个配置文件不动一行代码的情况下就给予完全的支持。  

对于使用albianj的系统，系统的维护也变得相对的简单和快速。因为albianj不
停的强调和强化统一，并且albianj也提供了一站式的开发解决方案，所以对于
开发者来说，他只需要在合适的地方填空合适的代码就基本上可以完成复杂的业
务开发。而对于系统本身来说，因为albianj是为我们量身定做的，而且从设计
上就强调了可维护性，所以整个系统都不会出现复杂税的现象，所有的主键也都
是“一键式”启用的，对于开发者来说，很多的功能都是透明性存在的。

我们对于使用albianj的开发者也进行了实验。参加这个实验的有两个人：一个
是A，刚刚毕业的硕士，没有任何的经验；另外一个是B，起先毫无java经验开发php的开发
者。他们使用的结果如下：

A： 1天上手，2个小时就可以正常使用；
B： 2天上手，2个小可以正常使用；

后来我们分析，A快于B主要是因为A其实在学生时代其实有java的经验，所以上
手比较快，而B其实满脑子的PHP思想，要一下子转变还是比较困难一点的。但是
不管怎么说，这个结果可以说明，使用albianj都可以快速的属性，进而可以快
速的开发系统。

###总结

我们之所以设计和实现albianj并不纯粹是因为好玩，更不是为了重新发明轮子。
但是不得不说，我们设计和实现albianj是更好的发明了互联网圈内的轮子，这
个轮子可能缺了一个幅，有可能采用了真空胎的结构，所以可以说，它只能很舒
服的被适用于互联网开发内，对于企业的开发，其实并不是那么的合适。

从我们设计和开发albianj，其中可以说明几点：

1. 现在的开源为了有更好的覆盖面，它们已经被加入了更多的功能使用场景，
但是对于一些特定的场景，特定的一些痛点，往往缺乏有针对性的支持，所以现
在来说，其实使用开发的成本已经越来越高了，使用开源软件，特别是这种开发
框架类的，不但要有使用的能力，甚至还要有阅读代码和二次开发的能力。  

2. albianj在实现过程中使用的一些技术，也并不是很难或者是很潮的技术，更
   不是那种能拿出来唬人的技术，只是一些平平常常的，就像家常菜一样口味
   的技术。这说明其实框架的开发并没有那么难，更没有那么神秘，一般的开
   发者完全可以自行的来实现。  

3. albianj在设计和实现的过程中，放弃和裁剪了很多的功能，只实现了我们需
   要的功能。这说明一个框架的好坏，甚至是好用不好用并不能指望于这个框
   架的功能是否完全，而是这个框架是否适合你的使用场景。一个简单、好用、
   适用、够用的框架才值得去用。  

4. 作为开发一个总体上的框架，一致性和可维护性必须从设计开始就要加以考
   虑，并且在实现的时候必须加以一丝不苟的执行。这样设计和开发出来的框
   架才能让开发者快速的熟悉和使用，让代码的管理者对于后期的业务扩展和
   重构更加的自信。所以在前期，就算99%的技术和时间都花在一致性和可维护
   性上也不为过。

5. 对于开发者怕出现bug的问题，其实有句话叫做：多做多错，少做少错。但是
   你不能仅仅因为怕出错就不去做。所以从设计和开发albianj的真实实践中，
   我们总结出一个开发伦理：如果不能解决所有的bug，那么就必须提供一个可
   快速修复bug的机制。

6. 作为一个管理者，有效的控制是必须要追求的。从系统实现的角度来说，要
   做到有效的控制，必须要做到统一性和单维性。统一性保证方法的实现和维
   护，单维性保证实现的时候能不偏离方向。

最后：技术是不能解决掉所有问题的，技术最多能解决掉70%的问题，剩下的30%
是需要靠管理来进行制约的。技术可以解决一切问题，但不是一切问题都可以被
技术解决的。

